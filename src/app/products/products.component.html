<div class="row">
  <div
    class="form-group input col-sm-12 col-md-8 my-2"
    style="padding-inline: 5px"
  >
    <div class="form-floating">
      <input
        [(ngModel)]="textInput"
        name="searchInput"
        #searchInput
        id="searchInput"
        type="search"
        class="form-control"
        placeholder="asdf"
        (keyup)="searchQuery($event)"
      />
      <label for="searchInput"> Bir ürün arayın... </label>
    </div>
  </div>

  <div
    class="btn-group col-sm-12 col-md-2 mb-2"
    style="padding-inline: 4px"
    role="group"
  >
    <button
      class="btn"
      [ngClass]="{
        'btn-primary': !isListView,
        'btn-outline-primary': isListView
      }"
      (click)="changeView(false)"
    >
      <i class="fa-solid fa-grip"></i>
    </button>
    <button
      class="btn btn-outline-primary"
      [ngClass]="{
        'btn-primary': isListView,
        'btn-outline-primary': !isListView
      }"
      (click)="changeView(true)"
    >
      <i class="fa-solid fa-list"></i>
    </button>
  </div>

  <div class="btn-group col-sm-12 col-md-2 mb-2" role="group">
    <button
      class="btn btn-primary"
      style="padding-inline: 0px !important"
      (click)="openCreateModal()"
    >
      <i class="fa-solid fa-file-circle-plus"></i> Yeni ürün
    </button>
  </div>
</div>

<div class="row">
  <ng-container *ngIf="products.length > 0; else noProducts">
    <div
      *ngFor="let product of products"
      [ngClass]="{
        'row my-1 px-1': isListView,
        'col-md-6 col-lg-4 col-xl-3 col-xxl-2 my-1 px-1': !isListView
      }"
    >
      <div
        class="card shadow-sm"
        [ngClass]="{
          'd-flex flex-md-row mb-2': isListView
        }"
        [style.height]="isListView ? '160px' : '320px'"
      >
        <!-- style="height: 250px" -->
        <ng-container *ngIf="!isListView; else listViewImage">
          <img
            class="img-fluid"
            src="http://localhost:3030/api/products/images/{{
              product.imageName
            }}"
            alt="{{ product.name }}"
            style="height: 140px; object-fit: scale-down"
          />
        </ng-container>
        <ng-template #listViewImage>
          <img
            class="col-3 img-fluid"
            src="http://localhost:3030/api/products/images/{{
              product.imageName
            }}"
            alt="{{ product.name }}"
            style="height: auto; width: 400px; object-fit: contain"
          />
        </ng-template>

        <div
          class="row card-body"
          [ngClass]="{
            'col-sm-9 px-0 justify-content-between': isListView,
            'd-flex flex-column': !isListView
          }"
        >
          <h6
            [ngClass]="{
              'card-text col-3  align-self-end': isListView,
              'card-text': !isListView
            }"
          >
            {{ product.name }}
          </h6>

          <div
            class="align-content-around"
            [ngClass]="{
              'd-inline-flex col-3 align-self-end justify-content-evenly ':
                isListView,
              'd-flex justify-content-around mt-auto mb-2': !isListView
            }"
          >
            <span
              ><i class="fa-solid fa-dollar-sign"></i>{{ product.price }}</span
            >
            <span><i class="fa-solid fa-cubes"></i>{{ product.stock }}</span>
          </div>

          <div
            class=""
            [ngClass]="{
              'd-flex flex-row col-3 align-self-end': isListView,
              'd-flex align-items-center mt-auto justify-content-around':
                !isListView
            }"
          >
            <!-- <div class="btn-group"> -->
            <button
              type="button"
              class="btn btn-sm btn-outline-primary"
              (click)="openDetailsModal(product)"
            >
              Detaylar
            </button>
            <button
              type="button"
              class="btn btn-sm mx-2 btn-warning"
              (click)="openEditModal(product)"
            >
              Düzenle
            </button>
            <button
              type="button"
              class="btn btn-sm btn-danger"
              (click)="openDeleteModal(product)"
            >
              Sil
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #noProducts>
    <div class="alert alert-danger">Ürün bulunamadı.</div>
  </ng-template>
</div>
